####e_ASTROGAM_Analysis   

RELEASE: Version 1.1.4   10/03/2017

AUTHORS:  G. Giannella  &  S. Guidotti

ADAPTED FROM: V. Fioretti IDL-based eASTROGAM analysis pipeline

DESCRIPTION: software which analyzes the fits files generated by BoGEMMS, based on Geant4. This code is tested for eASTROGAM V1.0 version. It runs on Python 2.7 and it needs the modules: astropy, numpy, math, copy, time, sys. 

INPUT FILE: './input_eASTROGAM'+astrogam_version+sdir+'/theta'+str(theta_type)+'/'+stripDir+py_dir+dir_cal+dir_passive+'/'+ene_type+'MeV.'+sim_name+'.'+str(theta_type)+'theta.'+pol_string+str(N_in)+part_type+'/xyz.'+str(ifile)+'.fits.gz'

OUTPUT FILES:

- G4.RAW.eASTROGAM'+astrogam_version+'.'+py_name+'.'+sim_name+'.'+stripname+'.'+sname+'.'+str(N_in)+part_type+'.'+ene_type+'MeV.'+str(theta_type)+'.'+str	(phi_type)+'.'+pol_string+str(ifile)+'.fits

- AA_FAKE_eASTROGAM'+astrogam_version+'.'+py_name+'.'+sim_name+'.'+stripname+'.'+sname+'.'+str(N_in)+part_type+'.'+ene_type+'MeV.'+str(theta_type)+'.'+str(phi_type)+'.'+pol_string+str(ifile)+'.dat

- L0.eASTROGAM'+astrogam_version+'.'+py_name+'.'+sim_name+'.'+stripname+'.'+sname+'.'+str(N_in)+part_type+'.'+ene_type+'MeV.'+str(theta_type)+'.'+str	(phi_type)+'.'+pol_string+str(ifile)+'.fits

- sim_tag+'_STRIP_'+str(N_in)+part_type+'_'+sname+'_'+ene_dis+'_'+ang_type+'_'+ene_type+'MeV_'+str(theta_type)+'_'+str(phi_type)+'.'+pol_string+str(ifile)+'.dat

- L0.5.eASTROGAM'+astrogam_version+'.'+py_name+'.'+sim_name+'.'+stripname+'.'+sname+'.'+str(N_in)+part_type+'.'+ene_type+'MeV.'+str(theta_type)+'.'+str(phi_type)+'.'+pol_string+str(ifile)+'.fits

- sim_tag+'_CLUSTER_'+str(N_in)+part_type+'_'+sname+'_'+ene_dis+'_'+ang_type+'_'+ene_type+'MeV_'+str(theta_type)+'_'+str(phi_type)+'.'+pol_string+str(ifile)+'.dat

- sim_tag+'_CLUSTER_PAIR_'+str(N_in)+part_type+'_'+sname+'_'+ene_dis+'_'+ang_type+'_'+ene_type+'MeV_'+str(theta_type)+'_'+str(phi_type)+'.'+pol_string+str(ifile)+'.dat

- sim_tag+'_CLUSTER_COMPTON_'+str(N_in)+part_type+'_'+sname+'_'+ene_dis+'_'+ang_type+'_'+ene_type+'MeV_'+str(theta_type)+'_'+str(phi_type)+'.'+pol_string+str(ifile)+'.dat

- G4.RAW.CAL.eASTROGAM'+astrogam_version+'.'+self.py_name+'.'+self.sim_name+'.'+self.stripname+'.'+self.sname+'.'+str(N_in)+part_type+'.'+self.ene_type+'MeV.'+str(theta_type)+'.'+str(phi_type)+'.'+self.pol_string+str(ifile)+'.fits'

- G4.CAL.eASTROGAM'+astrogam_version+'.'+self.py_name+'.'+self.sim_name+'.'+self.stripname+'.'+self.sname+'.'+str(N_in)+part_type+'.'+self.ene_type+'MeV.'+str(theta_type)+'.'+str(phi_type)+'.'+self.pol_string+str(ifile)+'.fits'

- G4.CAL.COMPTON.eASTROGAM'+astrogam_version+'.'+self.py_name+'.'+self.sim_name+'.'+self.stripname+'.'+self.sname+'.'+str(N_in)+part_type+'.'+self.ene_type+'MeV.'+str(theta_type)+'.'+str(phi_type)+'.'+self.pol_string+str(ifile)+'.fits'

- G4.CAL.PAIR.eASTROGAM'+astrogam_version+'.'+self.py_name+'.'+self.sim_name+'.'+self.stripname+'.'+self.sname+'.'+str(N_in)+part_type+'.'+self.ene_type+'MeV.'+str(theta_type)+'.'+str(phi_type)+'.'+self.pol_string+str(ifile)+'.fits'

- G4.RAW.AC.eASTROGAM'+astrogam_version+'.'+self.py_name+'.'+self.sim_name+'.'+self.stripname+'.'+self.sname+'.'+str(N_in)+part_type+'.'+self.ene_type+'MeV.'+str(theta_type)+'.'+str(phi_type)+'.'+self.pol_string+str(ifile)+'.fits'

- G4.AC.eASTROGAM'+astrogam_version+'.'+self.py_name+'.'+self.sim_name+'.'+self.stripname+'.'+self.sname+'.'+str(N_in)+part_type+'.'+self.ene_type+'MeV.'+str(theta_type)+'.'+str(phi_type)+'.'+self.pol_string+str(ifile)+'.fits'

- G4.AC.COMPTON.eASTROGAM'+astrogam_version+'.'+self.py_name+'.'+self.sim_name+'.'+self.stripname+'.'+self.sname+'.'+str(N_in)+part_type+'.'+self.ene_type+'MeV.'+str(theta_type)+'.'+str(phi_type)+'.'+self.pol_string+str(ifile)+'.fits'

- G4.AC.PAIR.eASTROGAM'+astrogam_version+'.'+self.py_name+'.'+self.sim_name+'.'+self.stripname+'.'+self.sname+'.'+str(N_in)+part_type+'.'+self.ene_type+'MeV.'+str(theta_type)+'.'+str(phi_type)+'.'+self.pol_string+str(ifile)+'.fits'



OTHER: In the BoGEMMS simulation, the XYZ_files must have the columns: EVT_ID, TRK_ID, PARENT_TRK_ID, VOLUME_ID, MOTHER_ID, E_DEP, X_ENT, Y_ENT, Z_ENT, X_EXIT, Y_EXIT, Z_EXIT, MDX_ENT, MDY_ENT, MDZ_ENT, MDX_EXIT, MDY_EXIT, MDZ_EXIT, GTIME_ENT, PARTICLE_ID, PROCESS_ID



GENERAL USAGE NOTES: 
————————————————————

1) eASTROGAM_ANALYSISv1_file_remote.py, DHSim.py and eASTROGAM_Geometry.py, eASTROGAM_ANALYSISv1_all_remote.py must be in the same directory;

2) Run eASTROGAM_ANALYSISv1_input.ll, selecting "python eASTROGAM_Geometry.py V1.0 or V1.1", to run eASTROGAM_Geometry.py and create the LUT for eASTROGAM_ANALYSISv1_file_remote.py;

3) In order to run eASTROGAM_ANALYSISv1_file_remote.py, the path of the fits files which are going to be analyzed must follow the filepath of the simulation; 

4) Run eASTROGAM_ANALYSISv1_input.ll, selecting "python eASTROGAM_ANALYSISv1_file_remote.py and the input parameters", to run eASTROGAM_ANALYSISv1_file_remote.py and analyze the fits files;

5) Run eASTROGAM_ANALYSISv1_input.ll, selecting "python eASTROGAM_ANALYSISv1_all_remote.py and the input parameters", to merge the outputs generated by eASTROGAM_ANALYSISv1_file_remote.py.
